(function(){var e=0;window.ytQuery={_validStandardFeeds:["top_rated","top_favorites","most_viewed","most_shared","most_popular","most_recent","most_discussed","most_responded","recently_featured","on_the_web"],_validParams:["q","max-results","start-index","standard_feed","caption","3d","category","duration","hd","lang","license","location","orderby","time"],_baseUrls:{"default":"http://gdata.youtube.com/feeds/api/videos",standard_feed:"http://gdata.youtube.com/feeds/api/standardfeeds/"},_callbacks:{},_registerCallback:function(e,t){var n=this;this._callbacks[e]=function(e){t(n._formatResponse(e))}},_appendQueryScript:function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,document.head.appendChild(t)},_formatResponse:function(e){return e.feed.entry},_getUrlFromParams:function(e,t){var n=["cbid="+(new Date).getTime()];return Object.keys(t).forEach(function(e){n.push(escape(e)+"="+escape(t[e]))}),this._getBaseUrl(t)+"?alt=json-in-script&callback=ytQuery._callbacks["+e+"]&v=2&"+n.join("&")},_getBaseUrl:function(e){return e.standard_feed?this._baseUrls.standard_feed+e.standard_feed:this._baseUrls.default},_verifyParams:function(e){var t=this,n=[];return Object.keys(e).forEach(function(e){t._validParams.indexOf(e)===-1&&n.push(e)}),e["max-results"]&&e["max-results"]>50&&n.push("max-results cannot exceed 50 - use start-index to page"),e.standard_feed&&(n=this._verifyStandardFeed(e.standard_feed,n)),n.length?n:!1},_verifyStandardFeed:function(e,t){return this._validStandardFeeds.indexOf(e)===-1&&t.push("Invalid standard feed: standard_feed must be one of "+this._validStandardFeeds.toString()),t},query:function(t,n){var r=this._verifyParams(t);if(r)throw r=r.toString(),new Error("Request uses invalid params "+r);var i=e++,s=this._getUrlFromParams(i,t);this._registerCallback(i,n),this._appendQueryScript(s)}}})();